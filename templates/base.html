<!doctype html>
<html lang="en" class="dark">
    <head>
        <meta charset="utf-8" />
        <title>{% block title %}Candy Dash{% endblock %}</title>

        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="theme-color" content="#0e1117" />

        <!-- App CSS -->
        <link
            rel="stylesheet"
            href="{{ url_for('static', filename='css/app.css') }}"
        />

        {% block head %}{% endblock %}
    </head>

    <body class="bg-gray-950 text-gray-200 min-h-screen">
        <div class="flex min-h-screen">
            <!-- Sidebar -->
            <aside
                class="w-64 shrink-0 bg-gray-900 border-r border-gray-800 hidden md:flex flex-col"
            >
                <div class="px-6 py-5 border-b border-gray-800">
                    <h1 class="text-xl font-bold tracking-tight">
                        ğŸ¬ Candy Dash
                    </h1>
                    <p class="text-xs text-gray-500 mt-1">Route Planner</p>
                </div>

                <nav class="flex-1 px-4 py-6 space-y-1 sidebar-nav">
                    <a
                        href="{{ url_for('dashboard.dashboard') }}"
                        class="block px-3 py-2 rounded-lg hover:bg-gray-800 transition"
                    >
                        Dashboard
                    </a>
                    <a
                        href="{{ url_for('route.route') }}"
                        class="block px-3 py-2 rounded-lg hover:bg-gray-800 transition"
                    >
                        Todayâ€™s Route
                    </a>
                    <a
                        href="{{ url_for('calendar.calendar') }}"
                        class="block px-3 py-2 rounded-lg hover:bg-gray-800 transition"
                    >
                        Calendar
                    </a>
                    <a
                        href="{{ url_for('customers.customers') }}"
                        class="block px-3 py-2 rounded-lg hover:bg-gray-800 transition"
                    >
                        Customers
                    </a>
                    <a
                        href="{{ url_for('balances.balances') }}"
                        class="block px-3 py-2 rounded-lg hover:bg-gray-800 transition"
                    >
                        Balances
                    </a>
                </nav>

                <div
                    class="px-6 py-4 border-t border-gray-800 text-xs text-gray-500"
                >
                    <div>Â© {{ now.year }} Candy Dash</div>
                </div>
            </aside>

            <!-- Main content -->
            <main class="flex-1 flex flex-col">
                <!-- Top bar (mobile) -->
                <header
                    class="md:hidden flex items-center justify-between px-4 py-3 border-b border-gray-800 bg-gray-900"
                >
                    <span class="font-semibold">ğŸ¬ Candy Dash</span>
                </header>

                <!-- Flash messages -->
                {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                <div class="px-6 pt-4 space-y-2">
                    {% for category, message in messages %}
                    <div
                        class="rounded-lg px-4 py-3 text-sm {% if category == 'success' %} bg-green-500/15 text-green-400 {% elif category == 'error' %} bg-red-500/15 text-red-400 {% elif category == 'warning' %} bg-yellow-500/15 text-yellow-400 {% else %} bg-gray-800 text-gray-300 {% endif %}"
                    >
                        {{ message }}
                    </div>
                    {% endfor %}
                </div>
                {% endif %} {% endwith %}

                <!-- Page content -->
                <div class="flex-1 px-4 py-6 md:px-8 md:py-8">
                    {% block content %}{% endblock %}
                </div>
            </main>
        </div>

        <!-- App JS -->
        <script src="{{ url_for('static', filename='js/app.js') }}"></script>

        {% block scripts %}{% endblock %}
    </body>
</html>
